jQuery.turntable=function(e,b,d,q,g,o){var p=new Phaser.Game(q.width,q.height,Phaser.CANVAS,"canvas_prize1",{preload:k,create:f},true);if(b.time=="auto"){if($.isArray(b.prizes)){b.time=b.prizes.length}else{if(parseInt(b.prizes)>0){b.time=1}else{b.time=0}}}g=g.reverse();var m=function(r){};var c;var j;var l=g.length;var h;var n;function k(){p.load.image("wheel",d.wheel);p.load.image("pin",d.pin)}function f(){j=p.add.sprite(p.width/2,p.width/2,"wheel");j.anchor.set(0.5);var r=p.add.sprite(p.width/2,p.width/2,"pin");r.anchor.set(0.5);n=p.add.text(p.world.centerX,480,"");n.anchor.set(0.5);n.align="center";c=true;p.input.onDown.add(a,p)}function a(){if(Math.round(b.time)!=b.time||b.time<1){o.prizeHintNo();return false}if(c){var r=b.rounds?parseInt(b.rounds):p.rnd.between(2,4);var t=360/g.length;var u=null;if($.isArray(b.prizes)){if(b.time>b.prizes.length){u=b.prizes[p.rnd.between(0,b.prizes.length-1)]}else{u=parseInt(b.prizes[b.time-1])}}else{u=parseInt(b.prizes)}if(u){u=parseInt(u*t-t+p.rnd.between(1,(t-2)>2?t-2:1))}else{b.time=0}n.text="";h=l-1-Math.floor(u/(360/l));c=false;var s=p.add.tween(j).to({angle:360*r+u},3000,Phaser.Easing.Quadratic.Out,true);s.onComplete.add(i,p)}}function i(){b.time=parseInt(b.time);if(Math.round(b.time)===b.time){if((--b.time)>0){c=true}else{c=false}if(g[h]){o.prizeHint(g[h],b)}else{o.prizeHintNo()}}else{c=false}}p.state.add("PlayGame",m);p.state.start("PlayGame")};